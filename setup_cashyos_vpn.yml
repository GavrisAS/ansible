- hosts: localhost
  connection: local
  gather_facts: true

  vars:
    # –ü–∞–∫–µ—Ç—ã –∏–∑ AUR
    aur_packages:
      - jetbrains-toolbox

  tasks:
    - name: üîë 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ AUR
      kewlfft.aur.aur:
        use: yay
        name: "{{ aur_packages }}"
        state: present
      become: false

    - name: üîë 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Julia
      become: false
      become_user: "{{ ansible_env.SUDO_USER | default(ansible_user_id | default('ammo')) }}"
      shell: |
        curl -fsSL https://install.julialang.org | sh -s -- --yes
      #args:
      #  executable: /bin/bash
      #  creates: "{{ ansible_env.HOME }}/.juliaup/bin/julia"

    - name: üîë 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π fish
      become: false
      become_user: "{{ ansible_env.SUDO_USER | default(ansible_user_id | default('ammo')) }}"
      shell: fish -c 'fish_update_completions'

    - name: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
      debug:
        msg: |
          ========================================================================
          ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
          ========================================================================
